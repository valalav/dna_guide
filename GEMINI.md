# GEMINI.md — Контекст для AI Ассистента

> Этот файл читается AI в начале каждой сессии. 
> Содержит критически важные правила и контекст проекта.

## Проект

**AADNA Project** — Adyghe-Abkhaz DNA Project
- Документация по ДНК-генеалогии народов Кавказа
- Материалы для участников WGS тестов
- Верификация данных через научные публикации

## Ключевые Файлы

| Файл | Назначение |
|------|------------|
| `current_tree.json` | **ИСТОЧНИК ИСТИНЫ** для TMRCA и филогенетического дерева |
| `00_General/02_Deep_Research_Prompts.md` | Промпты для исследований |
| `10_Haplogroups/G2/02_G2a2_L1264.md` | Документация по G-L1264 |
| `aadna.ru.csv` | Данные участников проекта |

---

## ⚠️ КРИТИЧЕСКИЕ ПРАВИЛА МЕТОДОЛОГИИ

### 1. НИКОГДА не делать выводов по поверхностным гаплогруппам!

**ОШИБКА:**
```
❌ "G2a1a у Сванов = идентичен Осетинам, значит они родственники"
```

**ПОЧЕМУ ОШИБКА:**
- G2a1a = зонтичная гаплогруппа с МНОЖЕСТВОМ разных ветвей
- У Осетин G2a1a = одна неглубокая линия (founder effect)
- Совпадение G2a1a может означать общего предка 10,000+ лет назад

### 2. Всегда проверять TMRCA из `current_tree.json`!

| SNP | Formed | TMRCA | Реальность |
|-----|--------|-------|------------|
| L1264 | 4900 | **4400 лет** | ДРЕВНЯЯ линия! |
| FGC21495 | 4400 | **3900 лет** | Всё ещё ДРЕВНЯЯ! |
| Y142023 | 3900 | 3600 лет | Древняя |

**Команда для проверки:**
```python
python3 debug_snps.py --snp FGC21495
```

### 3. Правила для выводов о родстве

| TMRCA | Можно делать выводы? |
|-------|---------------------|
| >1000 лет | ❌ НЕТ — слишком древний предок |
| 500-1000 лет | ⚠️ Осторожно |
| <500 лет | ✅ Генеалогическое родство |

### 4. Таблица уровней сравнения

| Уровень | Пример | TMRCA | Вывод |
|---------|--------|-------|-------|
| Поверхностный | G2a | ~25000 лет | ❌ |
| Средний | G2a1a/G2a2b | ~10000 лет | ❌ |
| Субклад | L1264 | ~4400 лет | ⚠️ |
| Подветвь | FGC21495 | ~3900 лет | ⚠️ |
| Терминальный | TMRCA <500 | <500 лет | ✅ |

---

## Стандартные Workflow

### /dna — Работа с геномом
Смотри `.agent/workflows/dna.md`

### Проверка SNP
```bash
cd dna_guide && python3 debug_snps.py
```

### Обработка PDF
```bash
cd dna_guide/import && pdftotext "file.pdf" - | head -300
mv *.pdf archive/
```

---

## Терминология

| Термин | Значение |
|--------|----------|
| Terminal SNP | Последний известный SNP в цепочке (не = терминальный для родства!) |
| TMRCA | Time to Most Recent Common Ancestor |
| Formed | Время образования ветви |
| WGS | Whole Genome Sequencing |
| Big Y | Y-хромосомное секвенирование от FTDNA |

---

## Напоминание

> [!CAUTION]
> **Перед любым сравнением популяций:**
> 1. Проверь TMRCA в `current_tree.json`!
> 2. TMRCA >1000 лет = НЕ делать выводов о "родстве народов"
> 3. Используй терминальные SNP, но проверяй их TMRCA!
> 4. Поверхностные данные (G2a, R1a, J2) = только отправная точка
